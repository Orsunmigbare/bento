{"openapi":"3.0.0","servers":[{"url":"/api"}],"info":{"description":"Fundu API","version":"2.0.0","title":"fundu-api","contact":{"email":"flow@stacc.com"}},"security":[{"bearerAuth":[]}],"definitions":{"Task":{"type":"object","properties":{"flowId":{"type":"string"},"createdAt":{"type":"string","format":"datetime"},"processDefinitionId":{"type":"string"},"taskCategory":{"type":"string"},"taskType":{"type":"string"},"updatedAt":{"type":"string","format":"datetime"},"variables":{"type":"object"}},"example":{"flowId":1234,"createdAt":"2018-03-19T15:39:41.442Z","processDefinitionId":"business-loan","taskCategory":"user-task","taskType":"register-account-number-and-signers","updatedAt":"2018-03-19T15:39:41.442Z","variables":{"flowId":"c0e7ef3c-ef18-430f-9384-c23cd02229a0","score":"GREEN","offerAccepted":true}}},"UserTaskAcceptLoanOffer":{"type":"object","required":["accepted"],"properties":{"accepted":{"type":"boolean"}}},"UserTaskProvideAdditionalInformation":{"type":"object"},"UserTaskRegisterAccountNumberAndSigners":{"required":["signers","accountNumber"],"properties":{"signers":{"type":"array","minItems":1,"uniqueItems":true,"items":{"type":"object","required":["id","email","nationalId"],"properties":{"id":{"type":"string"},"nationalId":{"type":"string"},"email":{"type":"string","format":"email"}}}},"accountNumber":{"type":"string"}}},"UserTaskSignDocument":{"type":"object","description":"Schema for sign document","required":["requestId","taskId"],"properties":{"requestId":{"type":"string"},"taskId":{"type":"number"}}},"PersonalFinanceInfo":{"type":"object","properties":{"relationshipStatus":{"type":"string","title":"Relationship status","description":"Relationship status","enum":["married","partner","divorced","single","widow","separated"]},"numberOfChildren":{"type":"integer","title":"Number of children","description":"Number of children aged < 18 living at home","minimum":0,"maximum":50},"incomeOfSpouse":{"type":"number","title":"Income of spouse before tax","description":"Income of spouse before tax","minimum":0,"maximum":1000000000,"default":0},"income":{"type":"number","title":"Income before tax","description":"Income before tax","minimum":0,"maximum":1000000000},"monthlySalary":{"type":"number","title":"Monthly salary before tax","description":"Monthly salary before tax","minimum":0,"maximum":1000000000},"monthlyRentAndExpenses":{"type":"number","title":"Monthly rent and housing expenses","description":"Monthly rent and housing expenses","minimum":0,"maximum":100000},"postalCode":{"type":"string","title":"Postal Code 4 digits"},"mortgageTotal":{"type":"number","title":"Total mortgage","minimum":0,"maximum":1000000000},"otherLoansTotal":{"type":"number","title":"Total sum of other loans","minimum":0,"maximum":1000000000}},"additionalProperties":false},"PersonInfo":{"type":"object","properties":{"name":{"type":"string","title":"Full name"},"email":{"type":"string","title":"Email","format":"email"},"phoneNumber":{"$id":"/properties/phonenumber","type":"string","title":"Phone Number","description":"The applicants phone number"},"nationalId":{"type":"string","title":"National identity number","description":"National identity number"},"birthDate":{"type":"string","format":"date","title":"Birthdate"}}},"CompanyInfo":{"type":"object","properties":{"orgNo":{"type":"string","examples":["912686043"]},"name":{"type":"string","examples":["RESTDB AS"]},"orgType":{"type":"string","examples":["AS"]},"bankrupt":{"type":"boolean","examples":[false]},"underLiquidation":{"type":"boolean","examples":[false]},"underCompulsoryLiquidation":{"type":"boolean","examples":[false]},"registeredInVolunteeringRegister":{"type":"boolean","examples":[false]},"registeredInVATRegister":{"type":"boolean","examples":[true]},"registeredInEntityRegister":{"type":"boolean","examples":[true]},"registeredInFoundationRegister":{"type":"boolean","examples":[false]},"numberOfEmployees":{"type":"integer","examples":[2]},"sectorCode":{"type":"string","examples":["2100"]},"postCode":{"type":"string","examples":["5008"]}}},"ApplicationSummary":{"type":"object","properties":{"company":{"type":"string"},"loanAmount":{"type":"number"},"loanType":{"type":"string","enum":["loan","credit"]}}},"Application":{"type":"object","properties":{"applicant":{"$ref":"#/definitions/PersonInfo"},"company":{"$ref":"#/definitions/CompanyInfo"},"loanType":{"type":"string","enum":["loan","credit"]},"loanAmount":{"type":"number","title":"Loan Amount","minimum":10000,"maximum":1000000},"revenueLast12Months":{"type":"number","title":"Revenue last 12 months","minimum":0,"maximum":1000000000},"repaymentPeriod":{"type":"integer","title":"Repayment period","minimum":3,"maximum":12},"loanPurpose":{"type":"string","title":"Purpose of loan","description":"What the loan will be used for"},"existingLoansTotal":{"type":"number","title":"Existing loan total","description":"Total of all existing loans for company today","minimum":0},"channel":{"type":"string","title":"The channel where the loan originated"},"personalFinance":{"$ref":"#/definitions/PersonalFinanceInfo"}}},"ApplicationResponse":{"type":"object","properties":{"applicant":{"$ref":"#/definitions/PersonInfo"},"company":{"$ref":"#/definitions/CompanyInfo"},"loanType":{"type":"string","enum":["loan","credit"]},"loanAmount":{"type":"number","title":"Loan Amount","minimum":10000,"maximum":1000000},"revenueLast12Months":{"type":"number","title":"Revenue last 12 months","minimum":0,"maximum":1000000000},"repaymentPeriod":{"type":"integer","title":"Repayment period","minimum":3,"maximum":12},"loanPurpose":{"type":"string","title":"Purpose of loan","description":"What the loan will be used for"},"existingLoansTotal":{"type":"number","title":"Existing loan total","description":"Total of all existing loans for company today","minimum":0},"documents":{"type":"array","items":{"type":"object","properties":{"description":{"type":"string"},"documentType":{"type":"string","enum":["security","contract"]},"signUrl":{"type":"string"},"signed":{"type":"boolean"}}}},"result":{"type":"object","properties":{"score":{"type":"string","enum":["accepted","rejected"]},"approvedLoanAmount":{"type":"number"},"repaymentPeriod":{"type":"integer"},"monthlyFee":{"type":"number"},"monthlyTotalAmount":{"type":"number"},"totalAmount":{"type":"number"}}},"accountNumber":{"type":"string"},"personalFinance":{"$ref":"#/definitions/PersonalFinanceInfo"}}},"Company":{"type":"object","properties":{"orgNo":{"type":"string"},"name":{"type":"string"},"orgType":{"type":"string"},"bankrupt":{"type":"boolean"},"underLiquidation":{"type":"boolean"},"underCompulsoryLiquidation":{"type":"boolean"},"registeredInVolunteeringRegister":{"type":"boolean"},"registeredInVATRegister":{"type":"boolean"},"registeredInEntityRegister":{"type":"boolean"},"registeredInFoundationRegister":{"type":"boolean"},"numberOfEmployees":{"type":"integer"},"sectorCode":{"type":"string"},"postCode":{"type":"string"}},"example":{"orgNo":981078365,"name":"STACC AS","orgType":"AS","bankrupt":false,"underLiquidation":false,"underCompulsoryLiquidation":false,"registeredInVolunteeringRegister":false,"registeredInVATRegister":true,"registeredInEntityRegister":true,"registeredInFoundationRegister":true,"numberOfEmployees":65,"sectorCode":2100,"postCode":5011}},"Account":{"type":"object","properties":{"accountNo":{"type":"string"},"accountType":{"type":"string"},"bookedBalance":{"type":"number"},"availableBalance":{"type":"number"},"limitAmount":{"type":"number"},"bankAccountNo":{"type":"string"}},"example":{"accountNo":"10001","accountType":"LOAN","bookedBalance":-299000,"availableBalance":-299000,"limitAmount":500000,"bankAccountNo":"12345678903"}},"Transaction":{"type":"object","properties":{"specificationType":{"type":"string"},"transactionDate":{"type":"string"},"amount":{"type":"number"},"description":{"type":"string"}},"example":{"specificationType":"Principal","transactionDate":"2018-04-25T00:00:00","amount":500000,"description":"The principal amount"}},"Invoice":{"type":"object","properties":{"invoiceNo":{"type":"string"},"dueDate":{"type":"string"},"postingDate":{"type":"string"},"invoiceTotalAmount":{"type":"number"},"giroKID":{"type":"string"},"status":{"type":"string"}},"example":{"invoiceNo":"100007","dueDate":"2018-05-15T00:00:00","postingDate":"2018-04-25T00:00:00","invoiceTotalAmount":104041.67,"giroKID":11000011000079,"status":"CLOSED"}}},"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}},"paths":{"/accounts":{"get":{"tags":["account"],"description":"Fetch accounts by company","parameters":[{"in":"query","name":"orgNumber","description":"Company org. number","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"A list of accounts","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/definitions/Account"}}}}}}}},"/accounts/{accountNumber}":{"get":{"tags":["account"],"description":"Fetch account","parameters":[{"in":"path","name":"accountNumber","description":"Account number","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"An account","content":{"application/json":{"schema":{"$ref":"#/definitions/Account"}}}}}}},"/accounts/{accountNumber}/invoices":{"get":{"tags":["account"],"description":"Fetch invoices connected to an account","parameters":[{"in":"path","name":"accountNumber","description":"Account number","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"An list of invoices","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/definitions/Invoice"}}}}}}}},"/accounts/{accountNumber}/transactions":{"get":{"tags":["account"],"description":"Fetch transactions connected to an account","parameters":[{"in":"path","name":"accountNumber","description":"Account number","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"An list of transactions","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/definitions/Transaction"}}}}}}}},"/companies":{"get":{"tags":["company"],"description":"Find a company by name","parameters":[{"in":"query","name":"name","description":"Company name","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"A list of companies","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/definitions/Company"}}}}},"400":{"description":"Bad request"}}}},"/companies/{orgNo}":{"get":{"tags":["company"],"description":"Get a company by org. number","responses":{"200":{"description":"A company","content":{"application/json":{"schema":{"$ref":"#/definitions/Company"}}}},"400":{"description":"Bad request"}},"parameters":[{"in":"path","name":"orgNo","description":"Org. number","required":true,"schema":{"type":"string"}}]}},"/payment-plan":{"get":{"tags":["payment-plan"],"description":"Calculate a payment plan","responses":{"200":{"description":"Object containing loan application id","content":{"application/json":{"schema":{"type":"object","properties":{"terms":{"type":"array","items":{"type":"object","properties":{"termNo":{"type":"integer","examples":[1]},"startAmount":{"type":"integer","examples":[100000]},"restAmount":{"type":"number","examples":[90387.4609375]},"interestAmount":{"type":"integer","examples":[875]},"installment":{"type":"number","examples":[9612.5380859375]},"monthlyPayment":{"type":"number","examples":[10487.5380859375]},"interestRate":{"type":"number","examples":[10.5]},"effectiveInterest":{"type":"number","examples":[11.010274887084961]}}}}}}}}},"400":{"description":"Bad request"}},"parameters":[{"in":"query","name":"loanAmount","description":"Loan amount","required":true,"schema":{"type":"string"}},{"in":"query","name":"numberOfTerms","description":"Number of terms","required":true,"schema":{"type":"string"}},{"in":"query","name":"productCode","description":"Id of the loan product","required":true,"schema":{"type":"string"}},{"in":"query","name":"campaignId","description":"Campaign id (optional)","schema":{"type":"string"}}]}},"/applications":{"post":{"tags":["application"],"description":"Create a new application","requestBody":{"description":"Initial parameters for application","required":true,"content":{"application/json":{"schema":{"$ref":"#/definitions/Application"}}}},"responses":{"201":{"description":"Application created","content":{"application/json":{"schema":{"type":"object","properties":{"flowId":{"type":"string"}},"example":{"flowId":"fbe64fe6-0721-462d-af1a-1ce6dec0b344"}}}}}}},"get":{"tags":["application"],"description":"Get applications associated with the current user","responses":{"200":{"description":"Array of applications","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/definitions/ApplicationSummary"}}}}}}}},"/applications/{id}":{"get":{"parameters":[{"in":"path","name":"id","description":"Application id","required":true,"schema":{"type":"string"}}],"tags":["application"],"description":"Get an application","responses":{"200":{"description":"An application","content":{"application/json":{"schema":{"$ref":"#/definitions/ApplicationResponse"}}}}}}},"/applications/{id}/tasks":{"get":{"parameters":[{"in":"path","name":"id","description":"Application id","required":true,"schema":{"type":"string"}}],"tags":["application","task"],"description":"Get all tasks for a given application","responses":{"200":{"description":"An array of tasks","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/definitions/Task"}}}}}}}},"/tasks":{"get":{"tags":["task"],"description":"Get tasks assigned to the current user","responses":{"200":{"description":"Array of tasks","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/definitions/Task"}}}}}}}},"/tasks/{id}":{"get":{"parameters":[{"in":"path","name":"id","description":"Task id","required":true,"schema":{"type":"string"}}],"tags":["task"],"description":"Get a task","responses":{"200":{"description":"A task","content":{"application/json":{"schema":{"$ref":"#/definitions/Task"}}}}}}},"/tasks/{id}/complete":{"post":{"tags":["task"],"description":"Complete a task. Actual payload depends on the type of the task.","requestBody":{"description":"Initial parameters for application","required":true,"content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/definitions/UserTaskAcceptLoanOffer"},{"$ref":"#/definitions/UserTaskProvideAdditionalInformation"},{"$ref":"#/definitions/UserTaskRegisterAccountNumberAndSigners"},{"$ref":"#/definitions/UserTaskSignDocument"}],"example":{"approved":true}}}}},"responses":{"204":{"description":"Task completed"}}}}}}