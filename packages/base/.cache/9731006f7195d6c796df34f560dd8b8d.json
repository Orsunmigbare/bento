{"dependencies":[{"name":"/Users/espen/Projects/bento/.babelrc","includedInParent":true,"mtime":1519317541057},{"name":"/Users/espen/Projects/bento/packages/base/package.json","includedInParent":true,"mtime":1519727028082},{"name":"react","loc":{"line":1,"column":18}},{"name":"prop-types","loc":{"line":2,"column":22}},{"name":"styled-components","loc":{"line":3,"column":34}},{"name":"../Input","loc":{"line":4,"column":57}},{"name":"downshift","loc":{"line":5,"column":22}},{"name":"../../../Layout/Flag/Flag","loc":{"line":6,"column":17}},{"name":"../../Label/Label","loc":{"line":7,"column":18}}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},t=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),n=require(\"react\"),o=g(n),r=require(\"prop-types\"),a=g(r),i=require(\"styled-components\"),l=g(i),u=require(\"../Input\"),c=g(u),s=require(\"downshift\"),f=g(s),p=require(\"../../../Layout/Flag/Flag\"),d=g(p),h=require(\"../../Label/Label\"),m=g(h);function g(e){return e&&e.__esModule?e:{default:e}}function y(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}function b(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function v(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}function w(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var C=function(n){function r(){var e;b(this,r);for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];var a=v(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(n)));return a.timeout=null,a.scheduleSearch=a.scheduleSearch.bind(a),a.state={autoComplete:[],selected:null,isLoading:!1},a}return w(r,o.default.PureComponent),t(r,[{key:\"componentWillMount\",value:function(){this.props.selected&&this.setState({selected:this.props.selected})}},{key:\"componentWillUnmount\",value:function(){clearTimeout(this.timeout),this.timeout=null}},{key:\"scheduleSearch\",value:function(e){var t=this;clearTimeout(this.timeout),!e||e.length<2?this.setState({autoComplete:[],isLoading:!1}):(this.setState({isLoading:!0}),this.timeout=setTimeout(function(){fetch(\"http://data.brreg.no/enhetsregisteret/enhet.json?page=0&size=5&$filter=\"+(\"startswith(navn,'\"+e+\"')\"),{cancelToken:t.cancelSource.token}).then(function(e){return e.data}).then(function(e){return e.data}).then(function(e){console.log(e),t.setState({autoComplete:e,isLoading:!1})}).catch(function(){return t.setState({autoComplete:[],isLoading:!1})})},this.props.searchTimeout))}},{key:\"handleChange\",value:function(e){var t=e.target.value;this.props.onChange&&this.props.onChange(e),this.scheduleSearch(t)}},{key:\"handleSelect\",value:function(e){var t=this;console.log(e),this.setState({selected:e},function(){t.props.onSelect&&t.props.onSelect(e)})}},{key:\"render\",value:function(){var t=this,n=this.props,r=(n.onChange,y(n,[\"onChange\"])),a=this.state,i=a.autoComplete,l=a.selected,u=a.isLoading;return o.default.createElement(f.default,{onSelect:this.handleSelect,itemToString:function(e){return e?e.name:\"\"},defaultIsOpen:!0,render:function(n){var a=n.getInputProps,s=n.getItemProps,f=(n.isOpen,n.inputValue,n.selectedItem,n.highlightedIndex);return o.default.createElement(\"div\",null,l&&o.default.createElement(E,{reverse:!0,img:o.default.createElement(k,{type:\"button\",onClick:function(){return t.setState({selected:null,autoComplete:[]})}},o.default.createElement(\"svg\",{viewBox:\"0 0 26 26\",width:\"50\",height:\"50\"},o.default.createElement(\"path\",{fill:\"currentColor\",d:\"M21.7344 19.6406l-2.0977 2.0938c-.3828.3867-1.0078.3867-1.3945 0L13 16.496l-5.2383 5.2383c-.3867.3867-1.0156.3867-1.3984 0l-2.0977-2.0938a.9878.9878 0 0 1 0-1.3984L9.504 13 4.2656 7.7617c-.3828-.3906-.3828-1.0195 0-1.3984l2.0977-2.0977c.3828-.3867 1.0117-.3867 1.3984 0L13 9.5078l5.2422-5.2422c.3867-.3867 1.0156-.3867 1.3945 0l2.0977 2.0938c.3867.3867.3867 1.0156.0039 1.4023L16.496 13l5.2383 5.2422a.9878.9878 0 0 1 0 1.3984z\"})))},o.default.createElement(m.default,{htmlFor:\"SelectedName\"},\"Bedrift\"),o.default.createElement(\"div\",{id:\"SelectedName\"},l.navn),o.default.createElement(O,null,l.organisasjonsnummer)),!l&&o.default.createElement(o.default.Fragment,null,o.default.createElement(c.default,e({},a(e({},r)),{onChange:t.handleChange})),u&&o.default.createElement(I,null,o.default.createElement(_,null)),i.length?o.default.createElement(I,null,o.default.createElement(j,null,i.map(function(t,n){return o.default.createElement(x,e({},s({item:t}),{key:t.organisasjonsnummer,isSelected:f===n}),t.navn+(\"AS\"!==t.orgform.kode?\" - \"+t.orgform.kode:\"\"),o.default.createElement(O,null,t.organisasjonsnummer))}))):null))}})}}]),r}(),S=(0,i.keyframes)([\"from{background-color:#F7F7FF;}to{background-color:#188EFB;}\"]),_=l.default.div.withConfig({displayName:\"CompanyInput__SelectLoad\"})([\"background-color:\",\";animation:0.8s \",\" ease-in-out infinite alternate;height:\",\";width:100%;position:absolute;cursor:pointer;top:0;left:0;z-index:10;box-shadow:0px \",\" \",\" rgba(0,0,0,0.06);\"],function(e){return e.theme.color.white},S,function(e){return e.theme.spacing.tiny},function(e){return e.theme.spacing.small},function(e){return e.theme.spacing.medium}),k=l.default.button.withConfig({displayName:\"CompanyInput__Close\"})([\"border-width:0;background-color:transparent;color:\",\";cursor:pointer;&:hover,&:focus,&:active{outline:none;color:\",\";}svg{width:\",\";}\"],function(e){return e.theme.color.primary},function(e){return e.theme.color.text},function(e){return e.theme.spacing.medium}),E=(0,l.default)(d.default).withConfig({displayName:\"CompanyInput__ModifiedFlag\"})([\"padding:\",\" \",\" \",\" \",\";position:relative;\"],function(e){return e.theme.spacing.tiny},function(e){return e.theme.spacing.tiny},function(e){return e.theme.spacing.tiny},function(e){return e.theme.spacing.medium}),O=l.default.div.withConfig({displayName:\"CompanyInput__OrgNo\"})([\"font-size:\",\";color:\",\";\"],function(e){return e.theme.font.size.tiny},function(e){return e.theme.color.wcag}),I=l.default.div.withConfig({displayName:\"CompanyInput__SelectWrapper\"})([\"position:relative;\"]),j=l.default.ul.withConfig({displayName:\"CompanyInput__SelectList\"})([\"position:absolute;cursor:pointer;top:0;left:0;z-index:10;width:100%;background:\",\";box-shadow:0px \",\" \",\" rgba(0,0,0,0.06);\"],function(e){return e.theme.color.white},function(e){return e.theme.spacing.small},function(e){return e.theme.spacing.medium}),x=l.default.li.withConfig({displayName:\"CompanyInput__SelectItem\"})([\"list-style:none;padding:\",\" \",\";background-color:\",\";color:\",\";border-bottom:1px solid \",\";\",\"{color:\",\";}&:first-child{border-top:1px solid \",\";}\"],function(e){return e.theme.spacing.small},function(e){return e.theme.spacing.medium},function(e){return e.isSelected?e.theme.color.primary:\"transparent\"},function(e){return e.isSelected?e.theme.color.white:e.theme.color.black},function(e){return e.theme.color.line},O,function(e){return e.isSelected?e.theme.color.white:e.theme.color.wcag},function(e){return e.theme.color.line});C.propTypes=e({searchTimeout:a.default.number,onSelect:a.default.func,selected:a.default.object},u.InputPropTypes),C.defaultProps=e({searchTimeout:200,onSelect:null,selected:null},u.InputDefaultProps),exports.default=C;"},"hash":"7bdf92caf26bd5a88b1278c9b594cf68","cacheData":{"env":{}}}